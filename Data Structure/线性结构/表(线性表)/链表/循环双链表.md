# 循环双链表

循环双链表是在双链表基础上的扩展，其特点是最后一个节点的next指针指向头节点，而头节点的prior指针指向尾节点，形成了一个环状结构。因此，循环双链表支持双链表的所有基本操作，并且由于其循环特性，还简化了一些操作。

## 结构定义

数据域（Data Field）：存储节点的实际数据，可以是任何数据类型。
前驱指针（Prior Pointer）：指向该节点在链表中的前一个节点。
后继指针（Next Pointer）：指向该节点在链表中的下一个节点。

## 特点

- 循环双链表：头结点prior指针还要指向表尾结点
- *p 为尾结点时，p->next==L;
- 当循环双链表为空表时，其开头的prior域 和 next 域都等于L。

## 常用操作

- 初始化：创建一个循环双链表，通常包括创建一个头节点，并使其prior指针指向自己，形成闭环。
- 插入操作：
  - 头部插入：在链表头部添加新节点，需要调整新节点与原头节点以及原头节点的后继节点的指针关系。
  - 尾部插入：在链表尾部添加新节点，由于是循环的，这通常涉及到调整尾节点的next指针指向新节点，并让新节点的prior指针指向尾节点，同时更新头节点的prior指针指向新节点。
  - 中间插入：在链表的任意位置插入新节点，需要调整插入位置前后节点的指针，以及新节点的前后指针。
- 删除操作：
  - 删除头部节点：需要更新原头节点的后继节点的prior指针为NULL（在非循环双链表中），但在循环双链表中则是调整头节点的指向。
  - 删除尾部节点：需要更新原尾节点的prior节点的next指针为头节点，并调整头节点的prior指针。
  - 删除指定节点：找到该节点并调整其前后节点的指针，以维持链表的连续性。
- 遍历：可以从任一节点开始，向前或向后遍历整个链表，由于是循环的，遍历时需注意停止条件，避免无限循环。
- 查找：根据节点值或其他条件查找链表中的节点。
- 长度计算：统计链表中的节点数量，遍历时需注意循环特性，避免重复计数。
- 更新节点值：修改链表中某个节点的数据域。
- 反转：虽然双链表也可以反转，但循环双链表的反转操作更为直观，只需交换每个节点的prior和next指针即可。
- 清空链表：删除链表中所有节点，还原到仅含头节点的状态，需要注意调整头节点的指针形成闭环。

### 插入

1. 头部插入

   - 创建新节点，并设置新节点的data字段。
   - 新节点的next指针指向当前头节点。
   - 新节点的prior指针指向当前尾节点（即原头节点的prior）。
   - 原头节点的prior指针更新为指向新节点。
   - 如果头节点和尾节点是同一个节点（链表原本为空），则还需更新尾节点的next指针为新节点。
   - 更新头节点为新节点。

2. 尾部插入

   - 创建新节点，并设置新节点的data字段。
   - 新节点的next指针指向头节点（形成循环）。
   - 新节点的prior指针指向当前尾节点。
   - 当前尾节点的next指针更新为指向新节点。
   - 更新尾节点为新节点。

3. 中间插入

   - 首先找到插入位置的前一个节点prevNode。
   - 创建新节点，并设置新节点的data字段。
   - 新节点的next指针指向prevNode的下一个节点。
   - 新节点的prior指针指向prevNode。
   - prevNode的下一个节点的prior指针更新为指向新节点。
   - prevNode的next指针更新为指向新节点。

### 反转双循环链表

```cpp
prev
含义：prev（前一个）指针通常用来存储当前处理节点的前一个节点的地址。在链表遍历或修改操作中，它帮助我们记住遍历路径，尤其是在需要逆序遍历或修改节点间连接时至关重要。
作用：在反转链表时，prev指针逐渐积累成为新链表中当前节点的后继节点，帮助构建新的链表结构。它是构建新链表的“基石”，随着遍历的进行，不断更新以指向遍历路径上的每一个节点。
current
含义：current（当前）指针指向当前正在操作或访问的链表节点。在遍历过程中，它随着每次迭代逐步移动到链表的下一个节点。
作用：在链表反转过程中，current用于访问链表中的每一个节点，逐个修改它们的指针，以实现链表方向的反转。它是动态变化的，反映了算法执行过程中的即时操作对象。
nextNode
含义：nextNode是一个临时变量，用于暂存当前节点的下一个节点。在链表操作中，特别是在需要修改节点的next指针时，先将下一个节点的信息存储在nextNode中，以防止在修改过程中丢失对后续节点的引用。
作用：在反转链表时，nextNode = current->next用于保存当前节点的下一个节点的引用，因为一旦修改current->next为prev（即完成了指针的反转），如果不事先保存current的下一个节点，将会丢失链表的连续性。nextNode确保了即使在当前节点的指针改变后，仍能顺利遍历到链表的其余部分。
```

## 实现

[C语言实现的循环双链表](./code/CircularDoublyLinkedList.c)
[另一个C语言实现的循环双链表](./code/CircularDoublyLinkedList_1.c)

## 应用场景

循环双链表适用于需要快速在链表两端进行操作，或者需要频繁地双向遍历的应用场景。例如，在实现某些类型的队列、缓存、最近最少使用（LRU）缓存策略、音乐播放器的播放列表等场景下，循环双链表能够提供高效的操作性能。
